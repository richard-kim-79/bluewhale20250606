(()=>{var e={};e.id=805,e.ids=[805],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},7439:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(2004),t(8586),t(5866);var s=t(3191),l=t(8716),a=t(7922),i=t.n(a),n=t(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);t.d(r,o);let d=["",{children:["user",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2004)),"/Users/richard_kim/bluewhale/bluewhale20250606/frontend/src/app/user/[id]/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,8586)),"/Users/richard_kim/bluewhale/bluewhale20250606/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/richard_kim/bluewhale/bluewhale20250606/frontend/src/app/user/[id]/page.tsx"],u="/user/[id]/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/user/[id]/page",pathname:"/user/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4846:(e,r,t)=>{Promise.resolve().then(t.bind(t,5558))},5558:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(326),l=t(7577),a=t(5047),i=t(4001),n=t(1471),o=t(434),d=t(6226);function c({content:e}){let r=new Date(e.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),t="string"==typeof e.author?e.author:e.author?.email||"알 수 없음";return s.jsx(o.default,{href:`/content/${e.id}`,children:s.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-200 cursor-pointer",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.title}),s.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:e.summary}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[s.jsx("span",{className:"mr-3",children:t}),s.jsx("span",{className:"mr-3",children:"•"}),s.jsx("span",{children:r})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[s.jsx("div",{className:`
              ${"pdf"===e.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}
              px-2 py-1 rounded text-xs font-medium mb-2
            `,children:"pdf"===e.type?"PDF":"TEXT"}),e.location&&void 0!==e.distance&&(0,s.jsxs)("div",{className:"flex items-center text-sm",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-gray-500",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),s.jsx("span",{className:"text-gray-500",children:"number"==typeof e.distance?`${e.distance.toFixed(1)}km 거리`:e.distance})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-blue-600",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),(0,s.jsxs)("span",{className:"text-blue-600 font-medium",children:["AI 점수: ",e.aiScore]})]})]})]})})})}let u=({userId:e})=>{let{user:r}=(0,i.a)(),[t,a]=(0,l.useState)([]),[c,u]=(0,l.useState)(!0),[x,m]=(0,l.useState)(""),[h,f]=(0,l.useState)({});(0,l.useEffect)(()=>{e&&(async()=>{try{u(!0);let t=await n.TV.getUserFollowers(e);if(r&&r.id){let e=await Promise.all((t.data||[]).map(async e=>{if(e.id===r.id)return{...e,isFollowing:!1};try{let r=await n.TV.getUserProfile(e.id);return{...e,isFollowing:r.isFollowing}}catch(r){return console.error(`Error checking follow status for user ${e.id}:`,r),{...e,isFollowing:!1}}}));a(e)}else a(t.data||[]);u(!1)}catch(e){console.error("Error fetching followers:",e),m("팔로워 목록을 불러오는데 실패했습니다."),u(!1)}})()},[e,r]);let p=async e=>{if(!h[e]&&r){f(r=>({...r,[e]:!0}));try{let r=t.find(r=>r.id===e);if(!r)return;r.isFollowing?(await n.TV.unfollowUser(e),a(r=>r.map(r=>r.id===e?{...r,isFollowing:!1}:r))):(await n.TV.followUser(e),a(r=>r.map(r=>r.id===e?{...r,isFollowing:!0}:r)))}catch(e){console.error("Error toggling follow status:",e)}finally{f(r=>({...r,[e]:!1}))}}};return c?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})}):x?s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mt-4",children:s.jsx("p",{children:x})}):0===t.length?s.jsx("div",{className:"text-center py-10 text-gray-500",children:"팔로워가 없습니다."}):s.jsx("div",{className:"space-y-4",children:t.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition",children:[(0,s.jsxs)(o.default,{href:`/user/${e.id}`,className:"flex items-center flex-grow",children:[s.jsx("div",{className:"relative w-12 h-12 rounded-full overflow-hidden bg-gray-200 mr-4",children:e.avatar?s.jsx(d.default,{src:e.avatar,alt:e.name||e.email,fill:!0,className:"object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:(e.name||e.email).charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-medium",children:e.name||e.email}),e.bio&&s.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:e.bio}),!e.bio&&s.jsx("p",{className:"text-sm text-gray-500",children:e.email})]})]}),r&&e.id!==r.id&&s.jsx("button",{onClick:()=>p(e.id),disabled:h[e.id],className:`ml-2 px-3 py-1 text-sm font-medium rounded-full ${e.isFollowing?"text-gray-700 bg-gray-100 hover:bg-gray-200":"text-white bg-blue-whale-600 hover:bg-blue-whale-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-whale-500`,children:h[e.id]?s.jsx("span",{className:"inline-block w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"}):e.isFollowing?"팔로잉":"팔로우"})]},e.id))})};var x=t(1212);let m=()=>{let e=(0,a.useParams)(),r=e?.id||"";(0,a.useRouter)();let{user:t,loading:m}=(0,i.a)(),[h,f]=(0,l.useState)(null),[p,g]=(0,l.useState)([]),[b,w]=(0,l.useState)(!0),[j,y]=(0,l.useState)(!1),[v,N]=(0,l.useState)(""),[k,C]=(0,l.useState)("content"),[F,q]=(0,l.useState)([]),[P,S]=(0,l.useState)([]);(0,l.useEffect)(()=>{(async()=>{if(r){w(!0);try{let e=await n.TV.getUserProfile(r);f(e);let t=await n.gT.getUserContent(r);g(t.data||[]),w(!1)}catch(e){console.error("Error fetching user profile:",e),N("사용자 프로필을 불러오는데 실패했습니다."),w(!1)}}})()},[r]),(0,l.useEffect)(()=>{(async()=>{if(r&&"content"!==k){w(!0);try{if("followers"===k){let e=await n.TV.getUserFollowers(r);q(e.data||[])}else if("following"===k){let e=await n.TV.getUserFollowing(r);S(e.data||[])}w(!1)}catch(e){console.error(`Error fetching ${k}:`,e),N(`${"followers"===k?"팔로워":"팔로잉"} 목록을 불러오는데 실패했습니다.`),w(!1)}}})()},[r,k]);let U=async()=>{if(h&&t&&!j){y(!0);try{h.isFollowing?(await n.TV.unfollowUser(r),f({...h,isFollowing:!1,followersCount:h.followersCount-1})):(await n.TV.followUser(r),f({...h,isFollowing:!0,followersCount:h.followersCount+1}))}catch(e){console.error("Error toggling follow status:",e),N(h.isFollowing?"언팔로우에 실패했습니다.":"팔로우에 실패했습니다.")}finally{y(!1)}}};if(m||b)return s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})});if(v)return(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[s.jsx("p",{className:"font-bold",children:"오류 발생"}),s.jsx("p",{children:v})]});if(!h)return(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded",children:[s.jsx("p",{className:"font-bold",children:"사용자를 찾을 수 없습니다"}),s.jsx("p",{children:"요청하신 사용자 프로필을 찾을 수 없습니다."})]});let _=t?.id===h.id;return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[s.jsx("div",{className:"relative w-24 h-24 rounded-full overflow-hidden bg-gray-200",children:h.avatar?s.jsx(d.default,{src:h.avatar,alt:h.name||h.email,fill:!0,className:"object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-2xl",children:(h.name||h.email).charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[s.jsx("h1",{className:"text-2xl font-bold",children:h.name||h.email}),s.jsx("p",{className:"text-gray-600 mb-2",children:h.email}),h.bio&&s.jsx("p",{className:"text-gray-700 mb-4",children:h.bio}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start mb-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("span",{className:"font-bold",children:p.length}),s.jsx("p",{className:"text-sm text-gray-500",children:"콘텐츠"})]}),(0,s.jsxs)("div",{className:"text-center cursor-pointer",onClick:()=>C("followers"),children:[s.jsx("span",{className:"font-bold",children:h.followersCount}),s.jsx("p",{className:"text-sm text-gray-500",children:"팔로워"})]}),(0,s.jsxs)("div",{className:"text-center cursor-pointer",onClick:()=>C("following"),children:[s.jsx("span",{className:"font-bold",children:h.followingCount}),s.jsx("p",{className:"text-sm text-gray-500",children:"팔로잉"})]})]}),s.jsx("div",{className:"flex flex-wrap gap-3 justify-center md:justify-start",children:_?s.jsx(o.default,{href:"/profile/edit",className:"px-4 py-2 bg-blue-whale-100 text-blue-whale-800 rounded-md hover:bg-blue-whale-200 transition",children:"프로필 수정"}):s.jsx("button",{onClick:U,disabled:j,className:`px-4 py-2 rounded-md transition ${h.isFollowing?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-blue-whale-600 text-white hover:bg-blue-whale-700"}`,children:j?s.jsx("span",{className:"inline-block w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"}):h.isFollowing?"언팔로우":"팔로우"})})]})]})}),s.jsx("div",{className:"border-b border-gray-200 mb-6",children:(0,s.jsxs)("nav",{className:"flex space-x-8",children:[s.jsx("button",{onClick:()=>C("content"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"content"===k?"border-blue-whale-600 text-blue-whale-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"콘텐츠"}),s.jsx("button",{onClick:()=>C("followers"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"followers"===k?"border-blue-whale-600 text-blue-whale-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"팔로워"}),s.jsx("button",{onClick:()=>C("following"),className:`py-4 px-1 border-b-2 font-medium text-sm ${"following"===k?"border-blue-whale-600 text-blue-whale-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"팔로잉"})]})}),(0,s.jsxs)("div",{children:["content"===k&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.length>0?p.map(e=>s.jsx(c,{content:e},e.id)):s.jsx("div",{className:"col-span-full text-center py-10 text-gray-500",children:"콘텐츠가 없습니다."})}),"followers"===k&&s.jsx(u,{userId:r}),"following"===k&&s.jsx(x.Z,{userId:r})]})]})}},1212:(e,r,t)=>{"use strict";t.d(r,{Z:()=>d});var s=t(326),l=t(7577),a=t(1471),i=t(6226),n=t(434),o=t(4001);let d=({userId:e})=>{let{user:r}=(0,o.a)(),[t,d]=(0,l.useState)([]),[c,u]=(0,l.useState)(!0),[x,m]=(0,l.useState)(""),[h,f]=(0,l.useState)({});(0,l.useEffect)(()=>{e&&(async()=>{try{u(!0);let r=((await a.TV.getUserFollowing(e)).data||[]).map(e=>({...e,isFollowing:!0}));d(r),u(!1)}catch(e){console.error("Error fetching following:",e),m("팔로잉 목록을 불러오는데 실패했습니다."),u(!1)}})()},[e]);let p=async e=>{if(!h[e]&&r){f(r=>({...r,[e]:!0}));try{await a.TV.unfollowUser(e),d(r=>r.filter(r=>r.id!==e))}catch(e){console.error("Error unfollowing user:",e)}finally{f(r=>({...r,[e]:!1}))}}};return c?s.jsx("div",{className:"flex justify-center py-12",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})}):x?s.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mt-4",children:s.jsx("p",{children:x})}):0===t.length?s.jsx("div",{className:"text-center py-10 text-gray-500",children:"팔로잉하는 사용자가 없습니다."}):s.jsx("div",{className:"space-y-4",children:t.map(t=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition",children:[(0,s.jsxs)(n.default,{href:`/user/${t.id}`,className:"flex items-center flex-grow",children:[s.jsx("div",{className:"relative w-12 h-12 rounded-full overflow-hidden bg-gray-200 mr-4",children:t.avatar?s.jsx(i.default,{src:t.avatar,alt:t.name||t.email,fill:!0,className:"object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:(t.name||t.email).charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-medium",children:t.name||t.email}),t.bio&&s.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:t.bio}),!t.bio&&s.jsx("p",{className:"text-sm text-gray-500",children:t.email})]})]}),r&&r.id===e&&s.jsx("button",{onClick:()=>p(t.id),disabled:h[t.id],className:"ml-2 px-3 py-1 text-sm font-medium rounded-full text-gray-700 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-whale-500",children:h[t.id]?s.jsx("span",{className:"inline-block w-4 h-4 border-2 border-t-transparent border-gray-700 rounded-full animate-spin"}):"언팔로우"})]},t.id))})}},2004:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(8570).createProxy)(String.raw`/Users/richard_kim/bluewhale/bluewhale20250606/frontend/src/app/user/[id]/page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[792,434,226,566],()=>t(7439));module.exports=s})();