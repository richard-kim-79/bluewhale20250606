(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},9801:e=>{"use strict";e.exports=require("os")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},4175:e=>{"use strict";e.exports=require("tty")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},1480:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),a(5480),a(8586),a(5866);var r=a(3191),s=a(8716),n=a(7922),l=a.n(n),i=a(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);a.d(t,o);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,5480)),"/Users/richard_kim/bluewhale/bluewhale20250606/frontend/src/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,8586)),"/Users/richard_kim/bluewhale/bluewhale20250606/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/richard_kim/bluewhale/bluewhale20250606/frontend/src/app/page.tsx"],u="/page",h={require:a,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2175:(e,t,a)=>{Promise.resolve().then(a.bind(a,1639))},1639:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var r=a(326),s=a(7577),n=a(434),l=a(4001),i=a(5777);function o({activeTab:e,onTabChange:t}){return r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[{id:"for-you",name:"추천 (For You)"},{id:"local",name:"주변 (Local)"},{id:"global",name:"글로벌 Top"},{id:"following",name:"팔로잉"}].map(a=>r.jsx("button",{onClick:()=>t(a.id),className:`
              whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm
              ${e===a.id?"border-blue-whale-600 text-blue-whale-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,"aria-current":e===a.id?"page":void 0,children:a.name},a.id))})})}var d=a(5047),c=a(1471),u=a(6226);let h=()=>{let e=(0,d.useRouter)(),{isAuthenticated:t}=(0,l.a)(),[a,i]=(0,s.useState)([]),[o,h]=(0,s.useState)(!0),[m,x]=(0,s.useState)(""),[f,g]=(0,s.useState)(null),[p,b]=(0,s.useState)({});(0,s.useEffect)(()=>{(async()=>{h(!0);try{let e={lat:37.5665,lng:126.978};try{if(navigator.geolocation){let t=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})});e={lat:t.coords.latitude,lng:t.coords.longitude},g(e)}}catch(t){console.error("Error getting user location:",t),g(e)}let t=await c.gT.getPersonalizedContent({page:1,limit:10,location:e});i(t?.data||[]),h(!1)}catch(e){console.error("Error fetching personalized content:",e),x("맞춤 콘텐츠를 불러오는데 실패했습니다."),i([]),h(!1)}})()},[]);let w=t=>{e.push(`/content/${t}`)},y=async(e,r)=>{if(r.stopPropagation(),!p[e]&&t){b(t=>({...t,[e]:!0}));try{let t=a.find(t=>t.author.id===e);if(!t)return;t.author.isFollowing?(await c.TV.unfollowUser(e),i(t=>t.map(t=>t.author.id===e?{...t,author:{...t.author,isFollowing:!1}}:t))):(await c.TV.followUser(e),i(t=>t.map(t=>t.author.id===e?{...t,author:{...t.author,isFollowing:!0}}:t)))}catch(e){console.error("Error toggling follow status:",e)}finally{b(t=>({...t,[e]:!1}))}}};return o?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})}):m?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[r.jsx("p",{className:"font-bold",children:"오류 발생"}),r.jsx("p",{children:m})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"추천 콘텐츠"}),0===a.length?(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded",children:[r.jsx("p",{className:"font-bold",children:"콘텐츠가 없습니다"}),r.jsx("p",{children:"현재 추천할 콘텐츠가 없습니다."})]}):r.jsx("div",{className:"space-y-4",children:a.map((e,a)=>(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow p-4 cursor-pointer",onClick:()=>w(e.id),children:[0===a&&r.jsx("div",{className:"mb-2 inline-block bg-blue-whale-100 text-blue-whale-800 text-xs font-medium px-2 py-1 rounded-full",children:"추천 콘텐츠"}),(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 hover:text-blue-whale-600",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[(0,r.jsxs)(n.default,{href:`/user/${e.author.id}`,className:"flex items-center hover:text-blue-whale-600",onClick:e=>e.stopPropagation(),children:[r.jsx("div",{className:"relative w-5 h-5 rounded-full overflow-hidden bg-gray-200 mr-1",children:e.author.avatar?r.jsx(u.default,{src:e.author.avatar,alt:e.author.name||e.author.email,fill:!0,className:"object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-xs",children:(e.author.name||e.author.email).charAt(0).toUpperCase()})}),r.jsx("span",{children:e.author.name||e.author.email})]}),r.jsx("span",{className:"mx-2",children:"•"}),r.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}),t&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"mx-2",children:"•"}),r.jsx("button",{onClick:t=>y(e.author.id,t),disabled:p[e.author.id],className:`text-xs font-medium ${e.author.isFollowing?"text-gray-500 hover:text-gray-700":"text-blue-whale-600 hover:text-blue-whale-800"}`,children:p[e.author.id]?r.jsx("span",{className:"inline-block w-3 h-3 border-t-2 border-blue-whale-600 rounded-full animate-spin"}):e.author.isFollowing?"팔로잉":"팔로우"})]})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:e.summary})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[r.jsx("div",{className:`${"pdf"===e.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"} px-2 py-1 rounded-full text-xs font-medium`,children:"pdf"===e.type?"PDF":"TEXT"}),(0,r.jsxs)("div",{className:"mt-2 flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-blue-600",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),r.jsx("span",{className:"text-xs text-blue-600",children:e.aiScore})]}),e.hasLocation&&(0,r.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-gray-500",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),r.jsx("span",{className:"text-xs text-gray-500",children:e.distance?`${e.distance.toFixed(1)}km 거리`:"위치 정보"})]})]})]})]},e.id))})]})};var m=a(810),x=a.n(m);a(6793);let f=({contents:e,onContentSelect:t})=>{let a=(0,s.useRef)(null),n=(0,s.useRef)(null),l=(0,s.useRef)([]),[i,o]=(0,s.useState)(null),[d,c]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{o({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{console.error("Error getting location:",e),o({lat:37.5665,lng:126.978})}):o({lat:37.5665,lng:126.978})},[]),(0,s.useEffect)(()=>{if(!a.current||!i)return;let e=process.env.NEXT_PUBLIC_MAPBOX_TOKEN;if(!e){console.error("Mapbox token is missing. Please add NEXT_PUBLIC_MAPBOX_TOKEN to your .env.local file.");return}if(x().accessToken=e,!n.current)return n.current=new(x()).Map({container:a.current,style:"mapbox://styles/mapbox/streets-v12",center:[i.lng,i.lat],zoom:13}),n.current.addControl(new(x()).NavigationControl,"top-right"),new(x()).Marker({color:"#3B82F6"}).setLngLat([i.lng,i.lat]).addTo(n.current).setPopup(new(x()).Popup().setHTML("<strong>내 위치</strong>")),n.current.on("load",()=>{c(!0)}),()=>{n.current&&(n.current.remove(),n.current=null)}},[i]),(0,s.useEffect)(()=>{n.current&&d&&(l.current.forEach(e=>e.remove()),l.current=[],e.forEach(e=>{let a=document.createElement("div");a.className="content-marker",a.style.width="25px",a.style.height="25px",a.style.borderRadius="50%",a.style.backgroundColor="pdf"===e.type?"#DBEAFE":"#D1FAE5",a.style.border="2px solid",a.style.borderColor="pdf"===e.type?"#3B82F6":"#10B981",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",a.style.fontWeight="bold",a.style.fontSize="10px",a.style.color="pdf"===e.type?"#1E40AF":"#047857",a.style.cursor="pointer",a.innerHTML=e.aiScore.toString();let r=new(x()).Popup({offset:25}).setHTML(`<strong>${e.title}</strong><br/>
         <span style="color: ${"pdf"===e.type?"#3B82F6":"#10B981"}">
           ${"pdf"===e.type?"PDF":"TEXT"}
         </span>`),s=new(x()).Marker(a).setLngLat([e.location.lng,e.location.lat]).setPopup(r).addTo(n.current);a.addEventListener("click",()=>{t(e.id)}),l.current.push(s)}))},[e,d,t]),r.jsx("div",{className:"w-full h-full rounded-lg overflow-hidden border border-gray-200",children:r.jsx("div",{className:"w-full h-full",ref:a,children:!process.env.NEXT_PUBLIC_MAPBOX_TOKEN&&r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:r.jsx("p",{className:"text-gray-500",children:"Mapbox token is missing. Please add NEXT_PUBLIC_MAPBOX_TOKEN to your .env.local file."})})})})},g=()=>{let e=(0,d.useRouter)(),{isAuthenticated:t}=(0,l.a)(),[a,i]=(0,s.useState)([]),[o,h]=(0,s.useState)(!0),[m,x]=(0,s.useState)(""),[g,p]=(0,s.useState)("map"),[b,w]=(0,s.useState)(null),[y,v]=(0,s.useState)({});(0,s.useEffect)(()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{w({lat:e.coords.latitude,lng:e.coords.longitude})},e=>{console.error("Error getting location:",e),x("위치 정보를 가져오는데 실패했습니다. 위치 권한을 확인해주세요."),w({lat:37.5665,lng:126.978})}):(x("이 브라우저는 위치 정보를 지원하지 않습니다."),w({lat:37.5665,lng:126.978}))},[]),(0,s.useEffect)(()=>{(async()=>{if(b){h(!0);try{let e=await c.gT.getLocalContent({page:1,limit:10,lat:b.lat,lng:b.lng,radius:10});i(e.data),h(!1)}catch(e){console.error("Error fetching local contents:",e),x("주변 콘텐츠를 불러오는데 실패했습니다."),h(!1)}}})()},[b]);let j=t=>{e.push(`/content/${t}`)},N=async(e,r)=>{if(r.stopPropagation(),!y[e]&&t){v(t=>({...t,[e]:!0}));try{let t=a.find(t=>t.author.id===e);if(!t)return;t.author.isFollowing?(await c.TV.unfollowUser(e),i(t=>t.map(t=>t.author.id===e?{...t,author:{...t.author,isFollowing:!1}}:t))):(await c.TV.followUser(e),i(t=>t.map(t=>t.author.id===e?{...t,author:{...t.author,isFollowing:!0}}:t)))}catch(e){console.error("Error toggling follow status:",e)}finally{v(t=>({...t,[e]:!1}))}}};if(o)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})});if(m)return(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[r.jsx("p",{className:"font-bold",children:"오류 발생"}),r.jsx("p",{children:m})]});let k=a.map(e=>({id:e.id,title:e.title,location:e.location,type:e.type,aiScore:e.aiScore}));return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"내 주변 콘텐츠"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>p("map"),className:`px-3 py-1 rounded-md text-sm font-medium ${"map"===g?"bg-blue-whale-100 text-blue-whale-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"지도 보기"}),r.jsx("button",{onClick:()=>p("list"),className:`px-3 py-1 rounded-md text-sm font-medium ${"list"===g?"bg-blue-whale-100 text-blue-whale-800":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"목록 보기"})]})]}),0===a.length?(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded",children:[r.jsx("p",{className:"font-bold",children:"주변에 콘텐츠가 없습니다"}),r.jsx("p",{children:"현재 위치 주변 10km 내에 등록된 콘텐츠가 없습니다."})]}):r.jsx(r.Fragment,{children:"map"===g?r.jsx("div",{className:"h-96",children:r.jsx(f,{contents:k,onContentSelect:j})}):r.jsx("div",{className:"space-y-4",children:a.sort((e,t)=>e.distance-t.distance).map(e=>r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow p-4 cursor-pointer",onClick:()=>j(e.id),children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 hover:text-blue-whale-600",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[(0,r.jsxs)(n.default,{href:`/user/${e.author.id}`,className:"flex items-center hover:text-blue-whale-600",onClick:e=>{e.stopPropagation()},children:[r.jsx("div",{className:"relative w-5 h-5 rounded-full overflow-hidden bg-gray-200 mr-1",children:e.author.avatar?r.jsx(u.default,{src:e.author.avatar,alt:e.author.name||e.author.email,fill:!0,className:"object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-xs",children:(e.author.name||e.author.email).charAt(0).toUpperCase()})}),r.jsx("span",{children:e.author.name||e.author.email})]}),r.jsx("span",{className:"mx-2",children:"•"}),r.jsx("span",{children:new Date(e.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}),t&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("span",{className:"mx-2",children:"•"}),r.jsx("button",{onClick:t=>{t.stopPropagation(),N(e.author.id,t)},disabled:y[e.author.id],className:`text-xs font-medium ${e.author.isFollowing?"text-gray-500 hover:text-gray-700":"text-blue-whale-600 hover:text-blue-whale-800"}`,children:y[e.author.id]?r.jsx("span",{className:"inline-block w-3 h-3 border-t-2 border-blue-whale-600 rounded-full animate-spin"}):e.author.isFollowing?"팔로잉":"팔로우"})]})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:e.summary})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[r.jsx("div",{className:`${"pdf"===e.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"} px-2 py-1 rounded-full text-xs font-medium`,children:"pdf"===e.type?"PDF":"TEXT"}),(0,r.jsxs)("div",{className:"mt-2 flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-blue-600",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),r.jsx("span",{className:"text-xs text-blue-600",children:e.aiScore})]}),(0,r.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-gray-500",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[e.distance.toFixed(1),"km 거리"]})]})]})]})},e.id))})})]})},p=Symbol.for("constructDateFrom");function b(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&p in e?e[p](t):e instanceof Date?new e.constructor(t):new Date(t)}let w={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function y(e){return (t={})=>{let a=t.width?String(t.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}let v={date:y({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:y({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:y({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},j={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function N(e){return(t,a)=>{let r;if("formatting"===(a?.context?String(a.context):"standalone")&&e.formattingValues){let t=e.defaultFormattingWidth||e.defaultWidth,s=a?.width?String(a.width):t;r=e.formattingValues[s]||e.formattingValues[t]}else{let t=e.defaultWidth,s=a?.width?String(a.width):e.defaultWidth;r=e.values[s]||e.values[t]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function k(e){return(t,a={})=>{let r;let s=a.width,n=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],l=t.match(n);if(!l)return null;let i=l[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(o)?function(e,t){for(let a=0;a<e.length;a++)if(t(e[a]))return a}(o,e=>e.test(i)):function(e,t){for(let a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&t(e[a]))return a}(o,e=>e.test(i));return r=e.valueCallback?e.valueCallback(d):d,{value:r=a.valueCallback?a.valueCallback(r):r,rest:t.slice(i.length)}}}function M(e){return(t,a={})=>{let r=t.match(e.matchPattern);if(!r)return null;let s=r[0],n=t.match(e.parsePattern);if(!n)return null;let l=e.valueCallback?e.valueCallback(n[0]):n[0];return{value:l=a.valueCallback?a.valueCallback(l):l,rest:t.slice(s.length)}}}let P={code:"en-US",formatDistance:(e,t,a)=>{let r;let s=w[e];return(r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),a?.addSuffix)?a.comparison&&a.comparison>0?"in "+r:r+" ago":r},formatLong:v,formatRelative:(e,t,a,r)=>j[e],localize:{ordinalNumber:(e,t)=>{let a=Number(e),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},era:N({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:N({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:N({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:N({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:N({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:M({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:k({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:k({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:k({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:k({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:k({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},L={};function C(e,t){return b(t||e,e)}function S(e){let t=C(e),a=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return a.setUTCFullYear(t.getFullYear()),+e-+a}function W(e,...t){let a=b.bind(null,e||t.find(e=>"object"==typeof e));return t.map(a)}function T(e,t){let a=+C(e)-+C(t);return a<0?-1:a>0?1:a}function F(e,t){return function(e,t,a){var r,s,n,l;let i;let o=a?.locale??L.locale??P,d=T(e,t);if(isNaN(d))throw RangeError("Invalid time value");let c=Object.assign({},a,{addSuffix:a?.addSuffix,comparison:d}),[u,h]=W(a?.in,...d>0?[t,e]:[e,t]),m=(r=h,s=u,(l=void 0,e=>{let t=(l?Math[l]:Math.trunc)(e);return 0===t?0:t})((+C(r)-+C(s))/1e3)),x=Math.round((m-(S(h)-S(u))/1e3)/60);if(x<2){if(a?.includeSeconds){if(m<5)return o.formatDistance("lessThanXSeconds",5,c);if(m<10)return o.formatDistance("lessThanXSeconds",10,c);if(m<20)return o.formatDistance("lessThanXSeconds",20,c);if(m<40)return o.formatDistance("halfAMinute",0,c);else if(m<60)return o.formatDistance("lessThanXMinutes",1,c);else return o.formatDistance("xMinutes",1,c)}return 0===x?o.formatDistance("lessThanXMinutes",1,c):o.formatDistance("xMinutes",x,c)}if(x<45)return o.formatDistance("xMinutes",x,c);if(x<90)return o.formatDistance("aboutXHours",1,c);if(x<1440)return o.formatDistance("aboutXHours",Math.round(x/60),c);if(x<2520)return o.formatDistance("xDays",1,c);if(x<43200)return o.formatDistance("xDays",Math.round(x/1440),c);if(x<86400)return i=Math.round(x/43200),o.formatDistance("aboutXMonths",i,c);if((i=function(e,t,a){let[r,s,n]=W(void 0,e,e,t),l=T(s,n),i=Math.abs(function(e,t,a){let[r,s]=W(void 0,e,t);return 12*(r.getFullYear()-s.getFullYear())+(r.getMonth()-s.getMonth())}(s,n));if(i<1)return 0;1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-l*i);let o=T(s,n)===-l;(function(e,t){let a=C(e,void 0);return+function(e,t){let a=C(e,t?.in);return a.setHours(23,59,59,999),a}(a,void 0)==+function(e,t){let a=C(e,t?.in),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}(a,void 0)})(r)&&1===i&&1===T(r,n)&&(o=!1);let d=l*(i-+o);return 0===d?0:d}(h,u))<12)return o.formatDistance("xMonths",Math.round(x/43200),c);{let e=i%12,t=Math.trunc(i/12);return e<3?o.formatDistance("aboutXYears",t,c):e<9?o.formatDistance("overXYears",t,c):o.formatDistance("almostXYears",t+1,c)}}(e,b(e,Date.now()),t)}let D={lessThanXSeconds:{one:"1초 미만",other:"{{count}}초 미만"},xSeconds:{one:"1초",other:"{{count}}초"},halfAMinute:"30초",lessThanXMinutes:{one:"1분 미만",other:"{{count}}분 미만"},xMinutes:{one:"1분",other:"{{count}}분"},aboutXHours:{one:"약 1시간",other:"약 {{count}}시간"},xHours:{one:"1시간",other:"{{count}}시간"},xDays:{one:"1일",other:"{{count}}일"},aboutXWeeks:{one:"약 1주",other:"약 {{count}}주"},xWeeks:{one:"1주",other:"{{count}}주"},aboutXMonths:{one:"약 1개월",other:"약 {{count}}개월"},xMonths:{one:"1개월",other:"{{count}}개월"},aboutXYears:{one:"약 1년",other:"약 {{count}}년"},xYears:{one:"1년",other:"{{count}}년"},overXYears:{one:"1년 이상",other:"{{count}}년 이상"},almostXYears:{one:"거의 1년",other:"거의 {{count}}년"}},E={date:y({formats:{full:"y년 M월 d일 EEEE",long:"y년 M월 d일",medium:"y.MM.dd",short:"y.MM.dd"},defaultWidth:"full"}),time:y({formats:{full:"a H시 mm분 ss초 zzzz",long:"a H:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},defaultWidth:"full"}),dateTime:y({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},A={lastWeek:"'지난' eeee p",yesterday:"'어제' p",today:"'오늘' p",tomorrow:"'내일' p",nextWeek:"'다음' eeee p",other:"P"},X={code:"ko",formatDistance:(e,t,a)=>{let r;let s=D[e];return(r="string"==typeof s?s:1===t?s.one:s.other.replace("{{count}}",t.toString()),a?.addSuffix)?a.comparison&&a.comparison>0?r+" 후":r+" 전":r},formatLong:E,formatRelative:(e,t,a,r)=>A[e],localize:{ordinalNumber:(e,t)=>{let a=Number(e);switch(String(t?.unit)){case"minute":case"second":return String(a);case"date":return a+"일";default:return a+"번째"}},era:N({values:{narrow:["BC","AD"],abbreviated:["BC","AD"],wide:["기원전","서기"]},defaultWidth:"wide"}),quarter:N({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1분기","2분기","3분기","4분기"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:N({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],wide:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"]},defaultWidth:"wide"}),day:N({values:{narrow:["일","월","화","수","목","금","토"],short:["일","월","화","수","목","금","토"],abbreviated:["일","월","화","수","목","금","토"],wide:["일요일","월요일","화요일","수요일","목요일","금요일","토요일"]},defaultWidth:"wide"}),dayPeriod:N({values:{narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},defaultWidth:"wide",formattingValues:{narrow:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},abbreviated:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"},wide:{am:"오전",pm:"오후",midnight:"자정",noon:"정오",morning:"아침",afternoon:"오후",evening:"저녁",night:"밤"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:M({matchPattern:/^(\d+)(일|번째)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:k({matchPatterns:{narrow:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(기원전|서기)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^(bc|기원전)/i,/^(ad|서기)/i]},defaultParseWidth:"any"}),quarter:k({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]사?분기/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:k({matchPatterns:{narrow:/^(1[012]|[123456789])/,abbreviated:/^(1[012]|[123456789])월/i,wide:/^(1[012]|[123456789])월/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1월?$/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:k({matchPatterns:{narrow:/^[일월화수목금토]/,short:/^[일월화수목금토]/,abbreviated:/^[일월화수목금토]/,wide:/^[일월화수목금토]요일/},defaultMatchWidth:"wide",parsePatterns:{any:[/^일/,/^월/,/^화/,/^수/,/^목/,/^금/,/^토/]},defaultParseWidth:"any"}),dayPeriod:k({matchPatterns:{any:/^(am|pm|오전|오후|자정|정오|아침|저녁|밤)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(am|오전)/i,pm:/^(pm|오후)/i,midnight:/^자정/i,noon:/^정오/i,morning:/^아침/i,afternoon:/^오후/i,evening:/^저녁/i,night:/^밤/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},z=()=>{let e=(0,d.useRouter)(),{isAuthenticated:t,user:a}=(0,l.a)(),[i,o]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[x,f]=(0,s.useState)(""),[g,p]=(0,s.useState)({});(0,s.useEffect)(()=>{(async()=>{m(!0);try{let e=await c.gT.getGlobalTopContent({page:1,limit:10});o(e?.data||[]),m(!1)}catch(e){console.error("Error fetching global top content:",e),f("글로벌 Top 콘텐츠를 불러오는데 실패했습니다."),o([]),m(!1)}})()},[]);let b=t=>{e.push(`/content/${t}`)},w=async(e,a)=>{if(a.stopPropagation(),!g[e]&&t){p(t=>({...t,[e]:!0}));try{let t=i.find(t=>t.author.id===e);if(!t)return;t.author.isFollowing?(await c.TV.unfollowUser(e),o(t=>t.map(t=>t.author.id===e?{...t,author:{...t.author,isFollowing:!1}}:t))):(await c.TV.followUser(e),o(t=>t.map(t=>t.author.id===e?{...t,author:{...t.author,isFollowing:!0}}:t)))}catch(e){console.error("Error toggling follow status:",e)}finally{p(t=>({...t,[e]:!1}))}}};return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})}):x?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[r.jsx("p",{className:"font-bold",children:"오류 발생"}),r.jsx("p",{children:x})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"글로벌 Top 콘텐츠"}),0===i.length?(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded",children:[r.jsx("p",{className:"font-bold",children:"콘텐츠가 없습니다"}),r.jsx("p",{children:"현재 글로벌 Top 콘텐츠가 없습니다."})]}):r.jsx("div",{className:"space-y-4",children:i.map(e=>(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow p-4 cursor-pointer",onClick:()=>b(e.id),children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 mr-3",children:e.author.avatar?r.jsx(u.default,{src:e.author.avatar,alt:e.author.name||e.author.email,width:40,height:40,className:"rounded-full object-cover"}):r.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-whale-100 flex items-center justify-center text-blue-whale-800 font-medium text-sm",children:(e.author.name?.[0]||e.author.email[0]).toUpperCase()})}),(0,r.jsxs)("div",{children:[r.jsx(n.default,{href:`/user/${e.author.id}`,onClick:e=>e.stopPropagation(),className:"text-sm font-medium text-gray-900 hover:underline",children:e.author.name||e.author.email}),r.jsx("p",{className:"text-xs text-gray-500",children:F(new Date(e.createdAt),{addSuffix:!0,locale:X})}),t&&a?.id!==e.author.id&&r.jsx("button",{onClick:t=>w(e.author.id,t),disabled:g[e.author.id],className:`text-xs font-medium mt-1 ${e.author.isFollowing?"text-gray-500 hover:text-gray-700":"text-blue-whale-600 hover:text-blue-whale-800"}`,children:g[e.author.id]?r.jsx("span",{className:"inline-block w-3 h-3 border-t-2 border-blue-whale-600 rounded-full animate-spin"}):e.author.isFollowing?"팔로잉":"팔로우"})]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[r.jsx("div",{className:`${"pdf"===e.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"} px-2 py-1 rounded-full text-xs font-medium`,children:"pdf"===e.type?"PDF":"TEXT"}),(0,r.jsxs)("div",{className:"mt-2 flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-blue-600",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),r.jsx("span",{className:"text-xs text-blue-600",children:e.aiScore})]}),e.hasLocation&&(0,r.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-gray-500",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),r.jsx("span",{className:"text-xs text-gray-500",children:"위치 정보"})]})]})]}),(0,r.jsxs)("div",{className:"ml-1",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-2",children:e.summary})]})]},e.id))})]})},B=()=>{let e=(0,d.useRouter)(),{isAuthenticated:t,user:a}=(0,l.a)(),[i,o]=(0,s.useState)([]),[h,m]=(0,s.useState)(!0),[x,f]=(0,s.useState)(""),[g,p]=(0,s.useState)({});(0,s.useEffect)(()=>{(async()=>{if(!t){f("팔로우한 작성자의 콘텐츠를 보려면 로그인이 필요합니다."),m(!1);return}m(!0);try{let e=(await c.TV.getUserFollowing(a.id,{page:1,limit:50})).data;if(0===e.length){o([]),m(!1);return}let t=e.map(async e=>{try{return(await c.gT.getUserContent(e.id,{page:1,limit:5})).data.map(e=>({...e,author:{...e.author,isFollowing:!0}}))}catch(t){return console.error(`Error fetching content for user ${e.id}:`,t),[]}}),r=(await Promise.all(t)).flat().sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());o(r),m(!1)}catch(e){console.error("Error fetching following content:",e),f("팔로우한 작성자의 콘텐츠를 불러오는데 실패했습니다."),m(!1)}})()},[t,a]);let b=t=>{e.push(`/content/${t}`)},w=async(e,a)=>{if(a.stopPropagation(),!g[e]&&t){p(t=>({...t,[e]:!0}));try{let t=i.find(t=>t.author.id===e);if(!t)return;t.author.isFollowing?(await c.TV.unfollowUser(e),o(t=>t.map(t=>t.author.id===e?{...t,author:{...t.author,isFollowing:!1}}:t)),setTimeout(()=>{o(t=>t.filter(t=>t.author.id!==e))},500)):(await c.TV.followUser(e),o(t=>t.map(t=>t.author.id===e?{...t,author:{...t.author,isFollowing:!0}}:t)))}catch(e){console.error("Error toggling follow status:",e)}finally{p(t=>({...t,[e]:!1}))}}};return h?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})}):t?x?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[r.jsx("p",{className:"font-bold",children:"오류 발생"}),r.jsx("p",{children:x})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"팔로잉 콘텐츠"}),0===i.length?(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded",children:[r.jsx("p",{className:"font-bold",children:"콘텐츠가 없습니다"}),r.jsx("p",{children:"팔로우한 작성자의 콘텐츠가 없습니다. 관심 있는 작성자를 팔로우해보세요!"}),r.jsx("button",{onClick:()=>e.push("/"),className:"mt-2 bg-blue-whale-600 text-white px-4 py-2 rounded hover:bg-blue-whale-700 transition-colors",children:"작성자 찾기"})]}):r.jsx("div",{className:"space-y-4",children:i.map(e=>r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow p-4 cursor-pointer",onClick:()=>b(e.id),children:(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900 hover:text-blue-whale-600",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[(0,r.jsxs)(n.default,{href:`/user/${e.author.id}`,className:"flex items-center hover:text-blue-whale-600",onClick:e=>e.stopPropagation(),children:[r.jsx("div",{className:"relative w-5 h-5 rounded-full overflow-hidden bg-gray-200 mr-1",children:e.author.avatar?r.jsx(u.default,{src:e.author.avatar,alt:e.author.name||e.author.email,fill:!0,className:"object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-xs",children:(e.author.name||e.author.email).charAt(0).toUpperCase()})}),r.jsx("span",{children:e.author.name||e.author.email})]}),r.jsx("span",{className:"mx-2",children:"•"}),r.jsx("span",{children:F(new Date(e.createdAt),{addSuffix:!0,locale:X})}),r.jsx("span",{className:"mx-2",children:"•"}),r.jsx("button",{onClick:t=>w(e.author.id,t),disabled:g[e.author.id],className:`text-xs font-medium ${e.author.isFollowing?"text-gray-500 hover:text-gray-700":"text-blue-whale-600 hover:text-blue-whale-800"}`,children:g[e.author.id]?r.jsx("span",{className:"inline-block w-3 h-3 border-t-2 border-blue-whale-600 rounded-full animate-spin"}):e.author.isFollowing?"팔로잉":"팔로우"})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:e.summary})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[r.jsx("div",{className:`${"pdf"===e.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"} px-2 py-1 rounded-full text-xs font-medium`,children:"pdf"===e.type?"PDF":"TEXT"}),(0,r.jsxs)("div",{className:"mt-2 flex items-center",children:[r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-blue-600",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),r.jsx("span",{className:"text-xs text-blue-600",children:e.aiScore})]}),e.hasLocation&&(0,r.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-gray-500",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),r.jsx("span",{className:"text-xs text-gray-500",children:"위치 정보"})]})]})]})},e.id))})]}):(0,r.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded",children:[r.jsx("p",{className:"font-bold",children:"로그인이 필요합니다"}),r.jsx("p",{children:"팔로우한 작성자의 콘텐츠를 보려면 로그인해주세요."}),r.jsx("button",{onClick:()=>e.push("/login"),className:"mt-2 bg-blue-whale-600 text-white px-4 py-2 rounded hover:bg-blue-whale-700 transition-colors",children:"로그인하기"})]})};var q=a(6713);let U=()=>{let{user:e}=(0,l.a)();return r.jsx(q.Z,{limit:3,title:"팔로우 추천",excludeUserId:e?.id})};function _(){let{isAuthenticated:e,loading:t}=(0,l.a)(),[a,d]=(0,s.useState)("for-you");return(0,r.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[r.jsx(i.Z,{}),r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:e||t?(0,r.jsxs)(r.Fragment,{children:[r.jsx(o,{activeTab:a,onTabChange:d}),r.jsx("div",{className:"mt-6",children:t?r.jsx("div",{className:"flex justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})}):(0,r.jsxs)("div",{children:["for-you"===a&&(0,r.jsxs)("div",{className:"md:flex md:space-x-6",children:[r.jsx("div",{className:"md:w-3/4",children:r.jsx(h,{})}),r.jsx("div",{className:"md:w-1/4 mt-6 md:mt-0",children:r.jsx(U,{})})]}),"local"===a&&(0,r.jsxs)("div",{className:"md:flex md:space-x-6",children:[r.jsx("div",{className:"md:w-3/4",children:r.jsx(g,{})}),r.jsx("div",{className:"md:w-1/4 mt-6 md:mt-0",children:r.jsx(U,{})})]}),"global"===a&&(0,r.jsxs)("div",{className:"md:flex md:space-x-6",children:[r.jsx("div",{className:"md:w-3/4",children:r.jsx(z,{})}),r.jsx("div",{className:"md:w-1/4 mt-6 md:mt-0",children:r.jsx(U,{})})]}),"following"===a&&(0,r.jsxs)("div",{className:"md:flex md:space-x-6",children:[r.jsx("div",{className:"md:w-3/4",children:r.jsx(B,{})}),r.jsx("div",{className:"md:w-1/4 mt-6 md:mt-0",children:r.jsx(U,{})})]})]})}),r.jsx("div",{className:"fixed bottom-6 right-6",children:r.jsx(n.default,{href:"/create",className:"btn-primary flex items-center justify-center h-14 w-14 rounded-full shadow-lg",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})})})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h1",{className:"text-4xl font-bold text-blue-whale-700 mb-6",children:"블루웨일 프로토콜에 오신 것을 환영합니다"}),r.jsx("p",{className:"text-xl mb-8 text-gray-600",children:"지역 기반의 실시간 지식과 AI가 검증한 글로벌 인사이트를 연결하는 탈중앙화 프로토콜"}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4",children:[r.jsx(n.default,{href:"/login",className:"btn-primary",children:"로그인"}),r.jsx(n.default,{href:"/register",className:"btn-secondary",children:"회원가입"})]})]})})]})}},5777:(e,t,a)=>{"use strict";a.d(t,{Z:()=>i});var r=a(326),s=a(7577),n=a(434),l=a(4001);function i(){let{user:e,logout:t,isAuthenticated:a}=(0,l.a)(),[i,o]=(0,s.useState)(!1);return(0,r.jsxs)("header",{className:"bg-white shadow-sm",children:[r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between h-16",children:[r.jsx("div",{className:"flex",children:r.jsx("div",{className:"flex-shrink-0 flex items-center",children:r.jsx(n.default,{href:"/",className:"text-2xl font-bold text-blue-whale-700",children:"BlueWhale"})})}),r.jsx("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:a?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(n.default,{href:"/search",className:"text-gray-600 hover:text-blue-whale-700",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("button",{onClick:()=>o(!i),className:"flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-whale-500",children:r.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-whale-600 flex items-center justify-center text-white",children:e?.email?.charAt(0).toUpperCase()})}),i&&(0,r.jsxs)("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:[r.jsx(n.default,{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"내 프로필"}),r.jsx(n.default,{href:"/my-content",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"내 콘텐츠"}),r.jsx("button",{onClick:t,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"로그아웃"})]})]})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(n.default,{href:"/login",className:"text-gray-600 hover:text-blue-whale-700",children:"로그인"}),r.jsx(n.default,{href:"/register",className:"btn-primary",children:"회원가입"})]})}),r.jsx("div",{className:"-mr-2 flex items-center sm:hidden",children:(0,r.jsxs)("button",{onClick:()=>o(!i),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-whale-500",children:[r.jsx("span",{className:"sr-only",children:"Open main menu"}),r.jsx("svg",{className:`${i?"hidden":"block"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),r.jsx("svg",{className:`${i?"block":"hidden"} h-6 w-6`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})})]})}),r.jsx("div",{className:`${i?"block":"hidden"} sm:hidden`,children:a?(0,r.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[r.jsx(n.default,{href:"/profile",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"내 프로필"}),r.jsx(n.default,{href:"/my-content",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"내 콘텐츠"}),r.jsx(n.default,{href:"/search",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"검색"}),r.jsx("button",{onClick:t,className:"block w-full text-left px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"로그아웃"})]}):(0,r.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[r.jsx(n.default,{href:"/login",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"로그인"}),r.jsx(n.default,{href:"/register",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"회원가입"})]})})]})}},6713:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var r=a(326),s=a(7577),n=a(1471),l=a(6226),i=a(434),o=a(4001);let d=({limit:e=3,title:t="팔로우 추천",excludeUserId:a})=>{let{isAuthenticated:d,user:c}=(0,o.a)(),[u,h]=(0,s.useState)([]),[m,x]=(0,s.useState)(!0),[f,g]=(0,s.useState)(""),[p,b]=(0,s.useState)({});(0,s.useEffect)(()=>{d&&(async()=>{try{x(!0);let t=(await n.TV.searchUsers("",{limit:e+5})).data||[];c?.id&&(t=t.filter(e=>e.id!==c.id)),a&&(t=t.filter(e=>e.id!==a)),t=t.slice(0,e),h(t),x(!1)}catch(e){console.error("Error fetching recommended users:",e),g("추천 사용자를 불러오는데 실패했습니다."),x(!1)}})()},[d,c?.id,e,a]);let w=async e=>{if(!p[e]){b(t=>({...t,[e]:!0}));try{let t=u.find(t=>t.id===e);if(!t)return;t.isFollowing?(await n.TV.unfollowUser(e),h(t=>t.map(t=>t.id===e?{...t,isFollowing:!1}:t))):(await n.TV.followUser(e),h(t=>t.map(t=>t.id===e?{...t,isFollowing:!0}:t)))}catch(e){console.error("Error toggling follow status:",e)}finally{b(t=>({...t,[e]:!1}))}}};return d?m?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:t}),r.jsx("div",{className:"animate-pulse space-y-3",children:[...Array(e)].map((e,t)=>(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("div",{className:"rounded-full bg-gray-200 h-10 w-10"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2 py-1",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},t))})]}):f?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:t}),r.jsx("p",{className:"text-red-500 text-sm",children:f})]}):0===u.length?null:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:[r.jsx("h2",{className:"text-lg font-medium mb-4",children:t}),(0,r.jsxs)("div",{className:"space-y-4",children:[u.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(i.default,{href:`/user/${e.id}`,className:"flex items-center flex-grow",children:[r.jsx("div",{className:"relative w-10 h-10 rounded-full overflow-hidden bg-gray-200 mr-3",children:e.avatar?r.jsx(l.default,{src:e.avatar,alt:e.name||e.email,fill:!0,className:"object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:(e.name||e.email).charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-medium text-sm",children:e.name||e.email}),e.bio?r.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:e.bio}):r.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[150px]",children:e.email})]})]}),r.jsx("button",{onClick:()=>w(e.id),disabled:p[e.id],className:`ml-2 px-3 py-1 text-xs font-medium rounded-full ${e.isFollowing?"text-gray-700 bg-gray-100 hover:bg-gray-200":"text-white bg-blue-whale-600 hover:bg-blue-whale-700"} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-whale-500`,children:p[e.id]?r.jsx("span",{className:"inline-block w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"}):e.isFollowing?"팔로잉":"팔로우"})]},e.id)),r.jsx("div",{className:"pt-2 text-center",children:r.jsx(i.default,{href:"/search?tab=users",className:"text-sm text-blue-whale-600 hover:text-blue-whale-800",children:"더 많은 사용자 찾기"})})]})]}):null}},5480:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});let r=(0,a(8570).createProxy)(String.raw`/Users/richard_kim/bluewhale/bluewhale20250606/frontend/src/app/page.tsx#default`)}};var t=require("../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[792,434,226,742,566],()=>a(1480));module.exports=r})();