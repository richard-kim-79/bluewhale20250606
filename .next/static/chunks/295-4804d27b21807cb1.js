"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{9295:function(e,t,a){a.d(t,{Z:function(){return l}});var n=a(7437),s=a(2265),r=a(7648),o=a(4362);function l(){var e;let{user:t,logout:a,isAuthenticated:l}=(0,o.a)(),[c,i]=(0,s.useState)(!1);return(0,n.jsxs)("header",{className:"bg-white shadow-sm",children:[(0,n.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,n.jsxs)("div",{className:"flex justify-between h-16",children:[(0,n.jsx)("div",{className:"flex",children:(0,n.jsx)("div",{className:"flex-shrink-0 flex items-center",children:(0,n.jsx)(r.default,{href:"/",className:"text-2xl font-bold text-blue-whale-700",children:"BlueWhale"})})}),(0,n.jsx)("div",{className:"hidden sm:ml-6 sm:flex sm:items-center",children:l?(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(r.default,{href:"/search",className:"text-gray-600 hover:text-blue-whale-700",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})})}),(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("button",{onClick:()=>i(!c),className:"flex text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-whale-500",children:(0,n.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-whale-600 flex items-center justify-center text-white",children:null==t?void 0:null===(e=t.email)||void 0===e?void 0:e.charAt(0).toUpperCase()})}),c&&(0,n.jsxs)("div",{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:[(0,n.jsx)(r.default,{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"내 프로필"}),(0,n.jsx)(r.default,{href:"/my-content",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"내 콘텐츠"}),(0,n.jsx)("button",{onClick:a,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"로그아웃"})]})]})]}):(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)(r.default,{href:"/login",className:"text-gray-600 hover:text-blue-whale-700",children:"로그인"}),(0,n.jsx)(r.default,{href:"/register",className:"btn-primary",children:"회원가입"})]})}),(0,n.jsx)("div",{className:"-mr-2 flex items-center sm:hidden",children:(0,n.jsxs)("button",{onClick:()=>i(!c),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-whale-500",children:[(0,n.jsx)("span",{className:"sr-only",children:"Open main menu"}),(0,n.jsx)("svg",{className:"".concat(c?"hidden":"block"," h-6 w-6"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),(0,n.jsx)("svg",{className:"".concat(c?"block":"hidden"," h-6 w-6"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})})]})}),(0,n.jsx)("div",{className:"".concat(c?"block":"hidden"," sm:hidden"),children:l?(0,n.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[(0,n.jsx)(r.default,{href:"/profile",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"내 프로필"}),(0,n.jsx)(r.default,{href:"/my-content",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"내 콘텐츠"}),(0,n.jsx)(r.default,{href:"/search",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"검색"}),(0,n.jsx)("button",{onClick:a,className:"block w-full text-left px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"로그아웃"})]}):(0,n.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[(0,n.jsx)(r.default,{href:"/login",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"로그인"}),(0,n.jsx)(r.default,{href:"/register",className:"block px-4 py-2 text-base font-medium text-gray-700 hover:bg-gray-100",children:"회원가입"})]})})]})}},4362:function(e,t,a){a.d(t,{AuthProvider:function(){return c},a:function(){return l}});var n=a(7437),s=a(2265),r=a(8223);let o=(0,s.createContext)(void 0),l=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:t}=e,[a,l]=(0,s.useState)(null),[c,i]=(0,s.useState)(!0),[d,u]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{let e=localStorage.getItem("user");if(localStorage.getItem("authToken")&&e)try{{let e=await r.kv.getCurrentUser();l(e),u(!0)}}catch(e){console.error("Error fetching current user:",e),localStorage.removeItem("authToken"),localStorage.removeItem("user")}i(!1)})()},[]);let h=async(e,t)=>{try{let{user:a,token:n}=await r.kv.login(e,t);localStorage.setItem("authToken",n),localStorage.setItem("user",JSON.stringify(a)),l(a),u(!0)}catch(e){throw console.error("Login failed:",e),e}},g=async(e,t)=>{try{let{user:a,token:n}=await r.kv.register(e,t);localStorage.setItem("authToken",n),localStorage.setItem("user",JSON.stringify(a)),l(a),u(!0)}catch(e){throw console.error("Registration failed:",e),e}},m=async()=>{try{await r.kv.logout()}catch(e){console.error("Logout API call failed:",e)}finally{localStorage.removeItem("authToken"),localStorage.removeItem("user"),l(null),u(!1)}};return(0,n.jsx)(o.Provider,{value:{user:a,isAuthenticated:d,loading:c,login:h,register:g,logout:m},children:t})}},8223:function(e,t,a){a.d(t,{Lz:function(){return o},TV:function(){return l},gT:function(){return r},kv:function(){return s}});let n=a(3464).Z.create({baseURL:"http://bluewhale-backend-env.eba-wehmnn34.ap-northeast-2.elasticbeanstalk.com",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{let t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),n.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)));let s={login:async(e,t)=>(await n.post("/auth/login",{email:e,password:t})).data,register:async(e,t)=>(await n.post("/auth/register",{email:e,password:t})).data,getCurrentUser:async()=>(await n.get("/auth/me")).data,logout:async()=>(await n.post("/auth/logout")).data},r={getContent:async e=>(await n.get("/content",{params:e})).data,getGlobalTopContent:async e=>(await n.get("/content/global-top",{params:e})).data,getPersonalizedContent:async e=>(await n.get("/content/personalized",{params:e})).data,getLocalContent:async e=>(await n.get("/content/local",{params:e})).data,getContentById:async e=>(await n.get("/content/".concat(e))).data,createContent:async e=>(await n.post("/content",e,{headers:{"Content-Type":"multipart/form-data"}})).data,updateContent:async(e,t)=>(await n.put("/content/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}})).data,deleteContent:async e=>(await n.delete("/content/".concat(e))).data,searchContent:async(e,t)=>(await n.get("/content/search",{params:{query:e,...t}})).data,getUserContent:async(e,t)=>(await n.get(e?"/content/user/".concat(e):"/content/my-content",{params:t})).data,saveContent:async e=>(await n.post("/content/".concat(e,"/save"))).data,unsaveContent:async e=>(await n.delete("/content/".concat(e,"/save"))).data,getSavedContent:async e=>(await n.get("/content/saved",{params:e})).data},o={getNotifications:async e=>(await n.get("/notifications",{params:e})).data,markAsRead:async e=>(await n.put("/notifications/".concat(e,"/read"))).data,markAllAsRead:async()=>(await n.put("/notifications/read-all")).data,getUnreadCount:async()=>(await n.get("/notifications/unread-count")).data},l={getUserProfile:async e=>(await n.get("/users/".concat(e))).data,updateUserProfile:async e=>{let t=new FormData;return e.name&&t.append("name",e.name),e.bio&&t.append("bio",e.bio),e.avatar&&t.append("avatar",e.avatar),(await n.put("/users/profile",t,{headers:{"Content-Type":"multipart/form-data"}})).data},followUser:async e=>(await n.post("/users/".concat(e,"/follow"))).data,unfollowUser:async e=>(await n.delete("/users/".concat(e,"/follow"))).data,getUserFollowers:async(e,t)=>(await n.get("/users/".concat(e,"/followers"),{params:t})).data,getUserFollowing:async(e,t)=>(await n.get("/users/".concat(e,"/following"),{params:t})).data,searchUsers:async(e,t)=>(await n.get("/users/search",{params:{query:e,...t}})).data}}}]);