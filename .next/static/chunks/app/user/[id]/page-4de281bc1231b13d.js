(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{5365:function(e,l,t){Promise.resolve().then(t.bind(t,9302))},9302:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return u}});var s=t(7437),r=t(2265),a=t(9376),n=t(4362),o=t(8223),i=t(7648),d=t(3145);function c(e){var l;let{content:t}=e,r=new Date(t.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}),a="string"==typeof t.author?t.author:(null===(l=t.author)||void 0===l?void 0:l.email)||"알 수 없음";return(0,s.jsx)(i.default,{href:"/content/".concat(t.id),children:(0,s.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-sm hover:shadow-lg transition-shadow duration-200 cursor-pointer",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:t.title}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 line-clamp-2",children:t.summary}),(0,s.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,s.jsx)("span",{className:"mr-3",children:a}),(0,s.jsx)("span",{className:"mr-3",children:"•"}),(0,s.jsx)("span",{children:r})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-end",children:[(0,s.jsx)("div",{className:"\n              ".concat("pdf"===t.type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800","\n              px-2 py-1 rounded text-xs font-medium mb-2\n            "),children:"pdf"===t.type?"PDF":"TEXT"}),t.location&&void 0!==t.distance&&(0,s.jsxs)("div",{className:"flex items-center text-sm",children:[(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-gray-500",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),(0,s.jsx)("span",{className:"text-gray-500",children:"number"==typeof t.distance?"".concat(t.distance.toFixed(1),"km 거리"):t.distance})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4 mr-1 text-blue-600",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z"})}),(0,s.jsxs)("span",{className:"text-blue-600 font-medium",children:["AI 점수: ",t.aiScore]})]})]})]})})})}var x=e=>{let{userId:l}=e,{user:t}=(0,n.a)(),[a,c]=(0,r.useState)([]),[x,m]=(0,r.useState)(!0),[u,h]=(0,r.useState)(""),[f,g]=(0,r.useState)({});(0,r.useEffect)(()=>{l&&(async()=>{try{m(!0);let e=await o.TV.getUserFollowers(l);if(t&&t.id){let l=await Promise.all((e.data||[]).map(async e=>{if(e.id===t.id)return{...e,isFollowing:!1};try{let l=await o.TV.getUserProfile(e.id);return{...e,isFollowing:l.isFollowing}}catch(l){return console.error("Error checking follow status for user ".concat(e.id,":"),l),{...e,isFollowing:!1}}}));c(l)}else c(e.data||[]);m(!1)}catch(e){console.error("Error fetching followers:",e),h("팔로워 목록을 불러오는데 실패했습니다."),m(!1)}})()},[l,t]);let w=async e=>{if(!f[e]&&t){g(l=>({...l,[e]:!0}));try{let l=a.find(l=>l.id===e);if(!l)return;l.isFollowing?(await o.TV.unfollowUser(e),c(l=>l.map(l=>l.id===e?{...l,isFollowing:!1}:l))):(await o.TV.followUser(e),c(l=>l.map(l=>l.id===e?{...l,isFollowing:!0}:l)))}catch(e){console.error("Error toggling follow status:",e)}finally{g(l=>({...l,[e]:!1}))}}};return x?(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})}):u?(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mt-4",children:(0,s.jsx)("p",{children:u})}):0===a.length?(0,s.jsx)("div",{className:"text-center py-10 text-gray-500",children:"팔로워가 없습니다."}):(0,s.jsx)("div",{className:"space-y-4",children:a.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition",children:[(0,s.jsxs)(i.default,{href:"/user/".concat(e.id),className:"flex items-center flex-grow",children:[(0,s.jsx)("div",{className:"relative w-12 h-12 rounded-full overflow-hidden bg-gray-200 mr-4",children:e.avatar?(0,s.jsx)(d.default,{src:e.avatar,alt:e.name||e.email,fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-500",children:(e.name||e.email).charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:e.name||e.email}),e.bio&&(0,s.jsx)("p",{className:"text-sm text-gray-500 line-clamp-1",children:e.bio}),!e.bio&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]}),t&&e.id!==t.id&&(0,s.jsx)("button",{onClick:()=>w(e.id),disabled:f[e.id],className:"ml-2 px-3 py-1 text-sm font-medium rounded-full ".concat(e.isFollowing?"text-gray-700 bg-gray-100 hover:bg-gray-200":"text-white bg-blue-whale-600 hover:bg-blue-whale-700"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-whale-500"),children:f[e.id]?(0,s.jsx)("span",{className:"inline-block w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"}):e.isFollowing?"팔로잉":"팔로우"})]},e.id))})},m=t(460),u=()=>{let e=(0,a.useParams)(),l=(null==e?void 0:e.id)||"";(0,a.useRouter)();let{user:t,loading:u}=(0,n.a)(),[h,f]=(0,r.useState)(null),[g,w]=(0,r.useState)([]),[b,p]=(0,r.useState)(!0),[j,y]=(0,r.useState)(!1),[v,N]=(0,r.useState)(""),[k,C]=(0,r.useState)("content"),[F,L]=(0,r.useState)([]),[S,E]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{if(l){p(!0);try{let e=await o.TV.getUserProfile(l);f(e);let t=await o.gT.getUserContent(l);w(t.data||[]),p(!1)}catch(e){console.error("Error fetching user profile:",e),N("사용자 프로필을 불러오는데 실패했습니다."),p(!1)}}})()},[l]),(0,r.useEffect)(()=>{(async()=>{if(l&&"content"!==k){p(!0);try{if("followers"===k){let e=await o.TV.getUserFollowers(l);L(e.data||[])}else if("following"===k){let e=await o.TV.getUserFollowing(l);E(e.data||[])}p(!1)}catch(e){console.error("Error fetching ".concat(k,":"),e),N("".concat("followers"===k?"팔로워":"팔로잉"," 목록을 불러오는데 실패했습니다.")),p(!1)}}})()},[l,k]);let T=async()=>{if(h&&t&&!j){y(!0);try{h.isFollowing?(await o.TV.unfollowUser(l),f({...h,isFollowing:!1,followersCount:h.followersCount-1})):(await o.TV.followUser(l),f({...h,isFollowing:!0,followersCount:h.followersCount+1}))}catch(e){console.error("Error toggling follow status:",e),N(h.isFollowing?"언팔로우에 실패했습니다.":"팔로우에 실패했습니다.")}finally{y(!1)}}};if(u||b)return(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-whale-600"})});if(v)return(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:[(0,s.jsx)("p",{className:"font-bold",children:"오류 발생"}),(0,s.jsx)("p",{children:v})]});if(!h)return(0,s.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded",children:[(0,s.jsx)("p",{className:"font-bold",children:"사용자를 찾을 수 없습니다"}),(0,s.jsx)("p",{children:"요청하신 사용자 프로필을 찾을 수 없습니다."})]});let U=(null==t?void 0:t.id)===h.id;return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6",children:[(0,s.jsx)("div",{className:"relative w-24 h-24 rounded-full overflow-hidden bg-gray-200",children:h.avatar?(0,s.jsx)(d.default,{src:h.avatar,alt:h.name||h.email,fill:!0,className:"object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-gray-500 text-2xl",children:(h.name||h.email).charAt(0).toUpperCase()})}),(0,s.jsxs)("div",{className:"flex-1 text-center md:text-left",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:h.name||h.email}),(0,s.jsx)("p",{className:"text-gray-600 mb-2",children:h.email}),h.bio&&(0,s.jsx)("p",{className:"text-gray-700 mb-4",children:h.bio}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center md:justify-start mb-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"font-bold",children:g.length}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"콘텐츠"})]}),(0,s.jsxs)("div",{className:"text-center cursor-pointer",onClick:()=>C("followers"),children:[(0,s.jsx)("span",{className:"font-bold",children:h.followersCount}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"팔로워"})]}),(0,s.jsxs)("div",{className:"text-center cursor-pointer",onClick:()=>C("following"),children:[(0,s.jsx)("span",{className:"font-bold",children:h.followingCount}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"팔로잉"})]})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-3 justify-center md:justify-start",children:U?(0,s.jsx)(i.default,{href:"/profile/edit",className:"px-4 py-2 bg-blue-whale-100 text-blue-whale-800 rounded-md hover:bg-blue-whale-200 transition",children:"프로필 수정"}):(0,s.jsx)("button",{onClick:T,disabled:j,className:"px-4 py-2 rounded-md transition ".concat(h.isFollowing?"bg-gray-200 text-gray-800 hover:bg-gray-300":"bg-blue-whale-600 text-white hover:bg-blue-whale-700"),children:j?(0,s.jsx)("span",{className:"inline-block w-4 h-4 border-2 border-t-transparent border-white rounded-full animate-spin"}):h.isFollowing?"언팔로우":"팔로우"})})]})]})}),(0,s.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,s.jsxs)("nav",{className:"flex space-x-8",children:[(0,s.jsx)("button",{onClick:()=>C("content"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("content"===k?"border-blue-whale-600 text-blue-whale-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"콘텐츠"}),(0,s.jsx)("button",{onClick:()=>C("followers"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("followers"===k?"border-blue-whale-600 text-blue-whale-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"팔로워"}),(0,s.jsx)("button",{onClick:()=>C("following"),className:"py-4 px-1 border-b-2 font-medium text-sm ".concat("following"===k?"border-blue-whale-600 text-blue-whale-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"팔로잉"})]})}),(0,s.jsxs)("div",{children:["content"===k&&(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.length>0?g.map(e=>(0,s.jsx)(c,{content:e},e.id)):(0,s.jsx)("div",{className:"col-span-full text-center py-10 text-gray-500",children:"콘텐츠가 없습니다."})}),"followers"===k&&(0,s.jsx)(x,{userId:l}),"following"===k&&(0,s.jsx)(m.Z,{userId:l})]})]})}}},function(e){e.O(0,[301,648,145,460,971,117,744],function(){return e(e.s=5365)}),_N_E=e.O()}]);