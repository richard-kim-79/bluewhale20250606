(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[11],{5513:function(e,t,a){Promise.resolve().then(a.bind(a,564))},564:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return u}});var s=a(7437),n=a(2265),r=a(9501),o=a(3590),c=a(1115),l=a(7648),i=a(9376),d=a(4362);let m=c.z.object({email:c.z.string().email("유효한 이메일을 입력해주세요"),password:c.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다"),confirmPassword:c.z.string().min(6,"비밀번호는 최소 6자 이상이어야 합니다")}).refine(e=>e.password===e.confirmPassword,{message:"비밀번호가 일치하지 않습니다",path:["confirmPassword"]});function u(){let e=(0,i.useRouter)(),{register:t}=(0,d.a)(),[a,c]=(0,n.useState)(!1),[u,p]=(0,n.useState)(""),{register:w,handleSubmit:g,formState:{errors:h}}=(0,r.cI)({resolver:(0,o.F)(m)}),f=async a=>{c(!0),p("");try{await t(a.email,a.password),e.push("/")}catch(e){var s,n;p((null===(n=e.response)||void 0===n?void 0:null===(s=n.data)||void 0===s?void 0:s.message)||"회원가입에 실패했습니다")}finally{c(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[(0,s.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"회원가입"}),(0,s.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:["이미 계정이 있으신가요?"," ",(0,s.jsx)(l.default,{href:"/login",className:"font-medium text-blue-whale-600 hover:text-blue-whale-500",children:"로그인"})]})]}),(0,s.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,s.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[u&&(0,s.jsx)("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:u}),(0,s.jsxs)("form",{className:"space-y-6",onSubmit:g(f),children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"이메일"}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)("input",{id:"email",type:"email",autoComplete:"email",className:"input-field",...w("email")}),h.email&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.email.message})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"비밀번호"}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)("input",{id:"password",type:"password",autoComplete:"new-password",className:"input-field",...w("password")}),h.password&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.password.message})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"비밀번호 확인"}),(0,s.jsxs)("div",{className:"mt-1",children:[(0,s.jsx)("input",{id:"confirmPassword",type:"password",autoComplete:"new-password",className:"input-field",...w("confirmPassword")}),h.confirmPassword&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:h.confirmPassword.message})]})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"submit",disabled:a,className:"w-full btn-primary flex justify-center py-2 px-4",children:a?(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"회원가입"})})]})]})})]})}},4362:function(e,t,a){"use strict";a.d(t,{AuthProvider:function(){return l},a:function(){return c}});var s=a(7437),n=a(2265),r=a(8223);let o=(0,n.createContext)(void 0),c=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[a,c]=(0,n.useState)(null),[l,i]=(0,n.useState)(!0),[d,m]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{let e=localStorage.getItem("user");if(localStorage.getItem("authToken")&&e)try{{let e=await r.kv.getCurrentUser();c(e),m(!0)}}catch(e){console.error("Error fetching current user:",e),localStorage.removeItem("authToken"),localStorage.removeItem("user")}i(!1)})()},[]);let u=async(e,t)=>{try{let{user:a,token:s}=await r.kv.login(e,t);localStorage.setItem("authToken",s),localStorage.setItem("user",JSON.stringify(a)),c(a),m(!0)}catch(e){throw console.error("Login failed:",e),e}},p=async(e,t)=>{try{let{user:a,token:s}=await r.kv.register(e,t);localStorage.setItem("authToken",s),localStorage.setItem("user",JSON.stringify(a)),c(a),m(!0)}catch(e){throw console.error("Registration failed:",e),e}},w=async()=>{try{await r.kv.logout()}catch(e){console.error("Logout API call failed:",e)}finally{localStorage.removeItem("authToken"),localStorage.removeItem("user"),c(null),m(!1)}};return(0,s.jsx)(o.Provider,{value:{user:a,isAuthenticated:d,loading:l,login:u,register:p,logout:w},children:t})}},8223:function(e,t,a){"use strict";a.d(t,{Lz:function(){return o},TV:function(){return c},gT:function(){return r},kv:function(){return n}});let s=a(3464).Z.create({baseURL:"http://bluewhale-backend-env.eba-wehmnn34.ap-northeast-2.elasticbeanstalk.com",headers:{"Content-Type":"application/json"}});s.interceptors.request.use(e=>{let t=localStorage.getItem("authToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>(e.response&&401===e.response.status&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)));let n={login:async(e,t)=>(await s.post("/auth/login",{email:e,password:t})).data,register:async(e,t)=>(await s.post("/auth/register",{email:e,password:t})).data,getCurrentUser:async()=>(await s.get("/auth/me")).data,logout:async()=>(await s.post("/auth/logout")).data},r={getContent:async e=>(await s.get("/content",{params:e})).data,getGlobalTopContent:async e=>(await s.get("/content/global-top",{params:e})).data,getPersonalizedContent:async e=>(await s.get("/content/personalized",{params:e})).data,getLocalContent:async e=>(await s.get("/content/local",{params:e})).data,getContentById:async e=>(await s.get("/content/".concat(e))).data,createContent:async e=>(await s.post("/content",e,{headers:{"Content-Type":"multipart/form-data"}})).data,updateContent:async(e,t)=>(await s.put("/content/".concat(e),t,{headers:{"Content-Type":"multipart/form-data"}})).data,deleteContent:async e=>(await s.delete("/content/".concat(e))).data,searchContent:async(e,t)=>(await s.get("/content/search",{params:{query:e,...t}})).data,getUserContent:async(e,t)=>(await s.get(e?"/content/user/".concat(e):"/content/my-content",{params:t})).data,saveContent:async e=>(await s.post("/content/".concat(e,"/save"))).data,unsaveContent:async e=>(await s.delete("/content/".concat(e,"/save"))).data,getSavedContent:async e=>(await s.get("/content/saved",{params:e})).data},o={getNotifications:async e=>(await s.get("/notifications",{params:e})).data,markAsRead:async e=>(await s.put("/notifications/".concat(e,"/read"))).data,markAllAsRead:async()=>(await s.put("/notifications/read-all")).data,getUnreadCount:async()=>(await s.get("/notifications/unread-count")).data},c={getUserProfile:async e=>(await s.get("/users/".concat(e))).data,updateUserProfile:async e=>{let t=new FormData;return e.name&&t.append("name",e.name),e.bio&&t.append("bio",e.bio),e.avatar&&t.append("avatar",e.avatar),(await s.put("/users/profile",t,{headers:{"Content-Type":"multipart/form-data"}})).data},followUser:async e=>(await s.post("/users/".concat(e,"/follow"))).data,unfollowUser:async e=>(await s.delete("/users/".concat(e,"/follow"))).data,getUserFollowers:async(e,t)=>(await s.get("/users/".concat(e,"/followers"),{params:t})).data,getUserFollowing:async(e,t)=>(await s.get("/users/".concat(e,"/following"),{params:t})).data,searchUsers:async(e,t)=>(await s.get("/users/search",{params:{query:e,...t}})).data}}},function(e){e.O(0,[301,648,558,971,117,744],function(){return e(e.s=5513)}),_N_E=e.O()}]);