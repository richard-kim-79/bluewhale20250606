(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4061:function(t,e,a){Promise.resolve().then(a.t.bind(a,9974,23)),Promise.resolve().then(a.bind(a,930)),Promise.resolve().then(a.bind(a,4362)),Promise.resolve().then(a.t.bind(a,9268,23))},930:function(t,e,a){"use strict";var n=a(7437),o=a(9376),r=a(2265),s=a(8223),c=a(4362);e.default=()=>{let t=(0,o.useRouter)(),e=(0,o.usePathname)(),{isAuthenticated:a}=(0,c.a)(),[l,i]=(0,r.useState)(0),u=t=>!!e&&!!("/"===t&&"/"===e||"/"!==t&&e.startsWith(t));return(0,r.useEffect)(()=>{if(!a)return;let t=async()=>{try{let t=await s.Lz.getUnreadCount();i(t.data.count)}catch(t){console.error("Error fetching unread notification count:",t)}};t();let e=setInterval(t,6e4);return()=>clearInterval(e)},[a]),(0,n.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-2 px-4 flex justify-around items-center z-10",children:[(0,n.jsxs)("button",{onClick:()=>t.push("/"),className:"flex flex-col items-center justify-center p-2 ".concat(u("/")?"text-blue-whale-600":"text-gray-500"),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),(0,n.jsx)("span",{className:"text-xs mt-1",children:"홈"})]}),(0,n.jsxs)("button",{onClick:()=>t.push("/search"),className:"flex flex-col items-center justify-center p-2 ".concat(u("/search")?"text-blue-whale-600":"text-gray-500"),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"})}),(0,n.jsx)("span",{className:"text-xs mt-1",children:"검색"})]}),(0,n.jsx)("button",{onClick:()=>t.push("/create"),className:"flex flex-col items-center justify-center bg-blue-whale-600 text-white rounded-full w-14 h-14 -mt-5",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}),(0,n.jsxs)("button",{onClick:()=>t.push("/notifications"),className:"flex flex-col items-center justify-center p-2 ".concat(u("/notifications")?"text-blue-whale-600":"text-gray-500"),children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),l>0&&(0,n.jsx)("span",{className:"absolute -top-1 -right-1 block h-4 w-4 rounded-full bg-red-600 text-xs text-white text-center",children:l>9?"9+":l})]}),(0,n.jsx)("span",{className:"text-xs mt-1",children:"알림"})]}),(0,n.jsxs)("button",{onClick:()=>t.push("/profile"),className:"flex flex-col items-center justify-center p-2 ".concat(u("/profile")?"text-blue-whale-600":"text-gray-500"),children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),(0,n.jsx)("span",{className:"text-xs mt-1",children:"프로필"})]})]})}},4362:function(t,e,a){"use strict";a.d(e,{AuthProvider:function(){return l},a:function(){return c}});var n=a(7437),o=a(2265),r=a(8223);let s=(0,o.createContext)(void 0),c=()=>{let t=(0,o.useContext)(s);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t},l=t=>{let{children:e}=t,[a,c]=(0,o.useState)(null),[l,i]=(0,o.useState)(!0),[u,d]=(0,o.useState)(!1);(0,o.useEffect)(()=>{(async()=>{let t=localStorage.getItem("user");if(localStorage.getItem("authToken")&&t)try{{let t=await r.kv.getCurrentUser();c(t),d(!0)}}catch(t){console.error("Error fetching current user:",t),localStorage.removeItem("authToken"),localStorage.removeItem("user")}i(!1)})()},[]);let h=async(t,e)=>{try{let{user:a,token:n}=await r.kv.login(t,e);localStorage.setItem("authToken",n),localStorage.setItem("user",JSON.stringify(a)),c(a),d(!0)}catch(t){throw console.error("Login failed:",t),t}},g=async(t,e)=>{try{let{user:a,token:n}=await r.kv.register(t,e);localStorage.setItem("authToken",n),localStorage.setItem("user",JSON.stringify(a)),c(a),d(!0)}catch(t){throw console.error("Registration failed:",t),t}},w=async()=>{try{await r.kv.logout()}catch(t){console.error("Logout API call failed:",t)}finally{localStorage.removeItem("authToken"),localStorage.removeItem("user"),c(null),d(!1)}};return(0,n.jsx)(s.Provider,{value:{user:a,isAuthenticated:u,loading:l,login:h,register:g,logout:w},children:e})}},8223:function(t,e,a){"use strict";a.d(e,{Lz:function(){return s},TV:function(){return c},gT:function(){return r},kv:function(){return o}});let n=a(3464).Z.create({baseURL:"http://bluewhale-backend-env.eba-wehmnn34.ap-northeast-2.elasticbeanstalk.com",headers:{"Content-Type":"application/json"}});n.interceptors.request.use(t=>{let e=localStorage.getItem("authToken");return e&&(t.headers.Authorization="Bearer ".concat(e)),t},t=>Promise.reject(t)),n.interceptors.response.use(t=>t,t=>(t.response&&401===t.response.status&&(localStorage.removeItem("authToken"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)));let o={login:async(t,e)=>(await n.post("/auth/login",{email:t,password:e})).data,register:async(t,e)=>(await n.post("/auth/register",{email:t,password:e})).data,getCurrentUser:async()=>(await n.get("/auth/me")).data,logout:async()=>(await n.post("/auth/logout")).data},r={getContent:async t=>(await n.get("/content",{params:t})).data,getGlobalTopContent:async t=>(await n.get("/content/global-top",{params:t})).data,getPersonalizedContent:async t=>(await n.get("/content/personalized",{params:t})).data,getLocalContent:async t=>(await n.get("/content/local",{params:t})).data,getContentById:async t=>(await n.get("/content/".concat(t))).data,createContent:async t=>(await n.post("/content",t,{headers:{"Content-Type":"multipart/form-data"}})).data,updateContent:async(t,e)=>(await n.put("/content/".concat(t),e,{headers:{"Content-Type":"multipart/form-data"}})).data,deleteContent:async t=>(await n.delete("/content/".concat(t))).data,searchContent:async(t,e)=>(await n.get("/content/search",{params:{query:t,...e}})).data,getUserContent:async(t,e)=>(await n.get(t?"/content/user/".concat(t):"/content/my-content",{params:e})).data,saveContent:async t=>(await n.post("/content/".concat(t,"/save"))).data,unsaveContent:async t=>(await n.delete("/content/".concat(t,"/save"))).data,getSavedContent:async t=>(await n.get("/content/saved",{params:t})).data},s={getNotifications:async t=>(await n.get("/notifications",{params:t})).data,markAsRead:async t=>(await n.put("/notifications/".concat(t,"/read"))).data,markAllAsRead:async()=>(await n.put("/notifications/read-all")).data,getUnreadCount:async()=>(await n.get("/notifications/unread-count")).data},c={getUserProfile:async t=>(await n.get("/users/".concat(t))).data,updateUserProfile:async t=>{let e=new FormData;return t.name&&e.append("name",t.name),t.bio&&e.append("bio",t.bio),t.avatar&&e.append("avatar",t.avatar),(await n.put("/users/profile",e,{headers:{"Content-Type":"multipart/form-data"}})).data},followUser:async t=>(await n.post("/users/".concat(t,"/follow"))).data,unfollowUser:async t=>(await n.delete("/users/".concat(t,"/follow"))).data,getUserFollowers:async(t,e)=>(await n.get("/users/".concat(t,"/followers"),{params:e})).data,getUserFollowing:async(t,e)=>(await n.get("/users/".concat(t,"/following"),{params:e})).data,searchUsers:async(t,e)=>(await n.get("/users/search",{params:{query:t,...e}})).data}},9268:function(){},9974:function(t){t.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(t){t.O(0,[799,301,971,117,744],function(){return t(t.s=4061)}),_N_E=t.O()}]);